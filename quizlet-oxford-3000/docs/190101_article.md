# è‹±èªã‚’åŠå¹´ã§ãƒã‚¹ã‚¿ãƒ¼ã™ã‚‹ãŸã‚ã® Quizlet å˜èªå¸³ã‚’ä½œã£ãŸè©±
## ã¯ã˜ã‚ã«
- **2019å¹´ã®ç›®æ¨™: è‹±èªã‚’ä½•ã¨ã‹ã™ã‚‹**  
- ç›®æ¨™é”æˆã®ãŸã‚ã« [Quizlet](https://quizlet.com/ja) (å˜èªå¸³ä½œæˆã‚µãƒ¼ãƒ“ã‚¹) ã§å˜èªå¸³ã‚’ä½œã£ãŸè©±ã§ã™
- ä½œæˆã—ãŸå˜èªã‚»ãƒƒãƒˆã¯ä»¥ä¸‹ã«å…¬é–‹ã—ã¦ã„ã¾ã™
  - [Oxford 3000 - 1 Flashcards | Quizlet](https://quizlet.com/355331197/oxford-3000-1-flash-cards/)
  - [Oxford 3000 - 2 Flashcards | Quizlet](https://quizlet.com/355331155/oxford-3000-2-flash-cards/)

## ä½œæˆ¦
ä»¥å‰ã«ä»¥ä¸‹ã®å‹•ç”»ã‚’è¦–è´ã—ã€(æ­£ç›´åŠä¿¡åŠç–‘ã§ã™ãŒ)æ°—ã«ãªã£ã¦ã„ã¾ã—ãŸã€‚
- [How to learn any language in six months | Chris Lonsdale | TEDxLingnanUniversity - YouTube](https://www.youtube.com/watch?v=d0yGdNEWdn0)

æ—¥æœ¬èªè¨³ã¨ã—ã¦ã¯ã€ä»¥ä¸‹ã®è¨˜äº‹ãŒè©³ã—ã„ã§ã™ã€‚
- [å¤–å›½èªã‚„ä¸­å›½èªã®èªå­¦ç¿’å¾—æœŸé–“ãŒ6ã‹æœˆã®å‹‰å¼·ãƒ»ãƒã‚¹ã‚¿ãƒ¼æ–¹æ³• - ãƒ­ã‚°ãƒŸãƒ¼[o_O]](https://logmi.jp/business/articles/13487)
- [å¤–å›½èªç¿’å¾—ã‚’6ã‹æœˆã§ãƒã‚¹ã‚¿ãƒ¼ã™ã‚‹è‹±èªã‚„ä¸­å›½èªã®è¨€èªã®è¦šãˆæ–¹ - ãƒ­ã‚°ãƒŸãƒ¼[o_O]](https://logmi.jp/business/articles/13562)

> è‹±èªã§ã‚ã‚Œã°ã€æ ¸ã¨ãªã‚‹1,000èªã§ã€æ—¥å¸¸ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ä½¿ã†èªå½™ã®85%ãŒã‚«ãƒãƒ¼å‡ºæ¥ã¾ã™ã€‚  
> 3,000èªã§ã€æ—¥å¸¸ä¼šè©±ã®ä¸­ã§è¨€ã„ãŸã„ã“ã¨ã®98%ã‚’è¡¨ã™ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚  
> 3,000èªã®èªå½™ãŒã‚ã‚Œã°ã€ãã®è¨€èªãŒè©±ã›ã‚‹ã®ã§ã™ã€‚æ®‹ã‚Šã¯æ·»ãˆç‰©ã®ã‚ˆã†ãªã‚‚ã®ã§ã™ã€‚  
> æ–°ã—ã„è¨€èªã‚’å­¦ã³å§‹ã‚ãŸæ™‚ã€ã¾ãšã¯ã€Œãƒ„ãƒ¼ãƒ«ã€ã‚’æƒãˆã‚‹ã“ã¨ã‹ã‚‰å§‹ã‚ã¾ã—ã‚‡ã†ã€‚  
> \-- [å¤–å›½èªç¿’å¾—ã‚’6ã‹æœˆã§ãƒã‚¹ã‚¿ãƒ¼ã™ã‚‹è‹±èªã‚„ä¸­å›½èªã®è¨€èªã®è¦šãˆæ–¹ - ãƒ­ã‚°ãƒŸãƒ¼[o_O]](https://logmi.jp/business/articles/13562)  

ä¸Šè¨˜ã®è¨˜äº‹ã«ã‚ˆã‚‹ã¨ã€3000 å˜èªã‚’ä½¿ã„ã“ãªã›ã‚Œã° 98% ã‚’è¡¨ç¾ã§ãã‚‹ã¨ã®ã“ã¨ã€‚
ã§ã¯ã€ã©ã® 3000 å˜èªã‚’ä½¿ã„ã“ãªã›ã‚Œã° 98% è¡¨ç¾ã§ãã‚‹ã®ã‹ã¨ã„ã†ã¨ã€
[Oxford 3000](https://www.oxfordlearnersdictionaries.com/about/oxford3000) ã¨ã„ã†å˜èªãƒªã‚¹ãƒˆãŒå„ªç§€ã¿ãŸã„ã§ã™ã€‚

> æµ·å¤–ã®è‹±èªå­¦ç¿’è€…ã®é–“ã§ã¯å¸¸è­˜ã§ã‚ã‚Šã€ãã®çœŸå®ŸãŒã‚ã¾ã‚Šæ—¥æœ¬ã«ã¯ä¼ã‚ã£ã¦ã„ãªã„ãŸã‚ã€å˜èªå¸³ãŒæ›¸åº—ã«æº¢ã‚Œã‹ãˆã£ã¦ã„ã¾ã™ã€‚  
> ã§ã™ãŒã€é€šå¸¸å¤–å›½èªã‚’å­¦ç¿’ã™ã‚‹ã®ã«ã„ãã¤ã‚‚å˜èªå¸³ã‚’æŒã¤å¿…è¦ã¯ãªãã€å›½éš›ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰ã«å‰‡ã£ã¦ã€OXFORD 3000å˜èªã ã‘å­¦ç¿’ã™ã‚Œã°ã„ã„ã€‚ã¨ã„ã†ã®ãŒç§ã®æŒè«–ã§ã™ã€‚  
> \-- [ä¸–ç•Œã§ã¯å¸¸è­˜ï¼Ÿæ—¥å¸¸è‹±ä¼šè©±ã®90ï¼…ä»¥ä¸Šã¯ã€OXFORD 3000å˜èªã ã‘ã§ååˆ†ãªç†ç”± - MULTILINGIRLâ™ª](https://www.multilingirl.com/2014/12/blog-post_75.html)

æ¤œç´¢ã—ãŸç¯„å›²ã§ã¯ã€æ‰‹æŒã¡ã®ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ã§è‰¯ã„æ„Ÿã˜ã«å­¦ç¿’ã§ãã‚‹ã‚¢ãƒ—ãƒªãŒè¦‹ã¤ã‹ã‚‰ãªã‹ã£ãŸãŸã‚ã€[puppeteer](https://github.com/GoogleChrome/puppeteer)ã§ã‚¯ãƒ­ãƒ¼ãƒ«ã—ã€[Quizlet](https://quizlet.com/ja) ä¸Šã«å˜èªã‚»ãƒƒãƒˆã‚’ä½œæˆã—ãŸè©±ã§ã™ã€‚

## Quizlet(å˜èªå¸³ã‚¢ãƒ—ãƒª)ã‚’é¸ã‚“ã ç†ç”±
- ã‚¢ãƒ—ãƒªãƒãƒ¼ã‚±ãƒƒãƒˆã¸ã®å…¬é–‹ç­‰ãŒé¢å€’ãªã®ã§0ãƒ™ãƒ¼ã‚¹ã§ä½œã‚‹ã®ã¯é¿ã‘ãŸã„
- Android (ã§ãã‚Œã°iOSã‚‚) ã§ä½¿ãˆã‚‹
- API çµŒç”±ã§ç·¨é›†ã§ãã‚‹
- è‹±èªã‚’èª­ã¿ä¸Šã’ã‚‹æ©Ÿèƒ½ãŒã‚ã‚‹

## å®Ÿè£…
ä»¥ä¸‹ã®æµã‚Œã§å®Ÿè£…ã—ã¾ã—ãŸã€‚ã‚³ãƒ¼ãƒ‰ç­‰ã¯[Github](https://github.com/mmiyahara/misc/tree/master/quizlet-oxford-3000)ä¸Šã«å…¬é–‹ã—ã¦ã„ã¾ã™ã€‚

1. [puppeteer](https://github.com/GoogleChrome/puppeteer) ã§ [Oxford 3000](https://www.oxfordlearnersdictionaries.com/about/oxford3000) ã‚’ã‚¯ãƒ­ãƒ¼ãƒ«ã—ãƒ‡ãƒ¼ã‚¿ã‚’ä½œæˆ
2. ã‚¯ãƒ­ãƒ¼ãƒ«ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’ç¢ºèªã—é©å®œä¿®æ­£
3. [Quizlet](https://quizlet.com/ja) ã« APIçµŒç”±ã§å˜èªã‚»ãƒƒãƒˆã‚’ä½œæˆã—ãƒ‡ãƒ¼ã‚¿ã‚’ç™»éŒ²

### 1. puppeteer ã§ Oxford 3000 ã‚’ã‚¯ãƒ­ãƒ¼ãƒ«ã—ãƒ‡ãƒ¼ã‚¿ã‚’ä½œæˆ
- 3000å˜èªãŒæ²è¼‰ã•ã‚Œã¦ã„ã‚‹URLã‚’é †ã«ã‚¯ãƒ­ãƒ¼ãƒ«ã—ã¦ã„ã¾ã™ã€‚
- å–å¾—ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’`words.js`ã«æ›¸ãå‡ºã—ã¦ã„ã¾ã™ã€‚

[misc/getOxford3000words.js at master Â· mmiyahara/misc](https://github.com/mmiyahara/misc/blob/master/quizlet-oxford-3000/getOxford3000words.js)  

```sh
# Crawl data from web
$ node getOxford3000words.js 
```
```javascript
const host = 'https://www.oxfordlearnersdictionaries.com/wordlist/english/oxford3000/Oxford3000_';
const targets = [
  'A-B/?page=1', 'A-B/?page=2',
  'A-B/?page=3', 'A-B/?page=4', 'A-B/?page=5',
  'C-D/?page=1', 'C-D/?page=2', 'C-D/?page=3', 'C-D/?page=4', 'C-D/?page=5', 'C-D/?page=6', 'C-D/?page=7',
  'E-G/?page=1', 'E-G/?page=2', 'E-G/?page=3', 'E-G/?page=4', 'E-G/?page=5', 'E-G/?page=6',
  'H-K/?page=1', 'H-K/?page=2', 'H-K/?page=3', 'H-K/?page=4',
  'L-N/?page=1', 'L-N/?page=2', 'L-N/?page=3', 'L-N/?page=4',
  'O-P/?page=1', 'O-P/?page=2', 'O-P/?page=3', 'O-P/?page=4', 'O-P/?page=5',
  'Q-R/?page=1', 'Q-R/?page=2', 'Q-R/?page=3',
  'S/?page=1', 'S/?page=2', 'S/?page=3', 'S/?page=4', 'S/?page=5',
  'T/?page=1', 'T/?page=2', 'T/?page=3',
  'U-Z/?page=1', 'U-Z/?page=2', 'U-Z/?page=3'
];
const urls = targets.map((target) => host + target);

puppeteer.launch().then(async browser => {
  let words = [];
  for (const url of urls) {
    words.push(await fetchWords(browser, url));
  }
  await browser.close();
  await fs.writeFile('words.js', JSON.stringify(words, null, '  '));
});
```

### 2. ã‚¯ãƒ­ãƒ¼ãƒ«ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’ç¢ºèªã—é©å®œä¿®æ­£
- `words.js`ã«[ã“ã‚“ãªæ„Ÿã˜](https://github.com/mmiyahara/misc/blob/751d176db5cf1ee268ebf3db8ec3323f743f16f5/quizlet-oxford-3000/words.js#L171)ã§HTMLã‚¿ã‚°ãŒæ®‹ã£ã¦ã„ãŸãŸã‚ã€å–ã‚Šé™¤ãã¾ã™ã€‚
ã¾ãŸã€å˜èªã®æ„å‘³ã¨ã—ã¦ã€ä¾‹æ–‡ãŒå«ã¾ã‚Œã¦ã„ã‚‹å ´åˆãŒã‚ã£ãŸã®ã§ã€ä¾‹æ–‡ã‚‚å–ã‚Šé™¤ãã¾ã™ã€‚
- \#1 ã§å–å¾—ã—ãŸãƒ‡ãƒ¼ã‚¿ã®æ›¸ãå‡ºã—æ–¹æ³•ãŒã‚¤ã‚±ã¦ãªã‹ã£ãŸã®ã§ã€å°‘ã—ç·¨é›†ã—ã¦ã„ã¾ã™ã€‚
- ç·¨é›†ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’`wordsFlatten.js`ã«æ›¸ãå‡ºã—ã¦ã„ã¾ã™ã€‚
(å˜èªåãŒè¢«ã‚‹ã¨é¢å€’ã ã¨æ€ã„`.js`ã§æ›¸ãå‡ºã—ã¾ã—ãŸãŒã€`.json`ã§ã‚ˆã‹ã£ãŸã¨å¾Œã‹ã‚‰åçœã—ã¾ã—ãŸğŸ˜)  

[misc/stripHTML.js at master Â· mmiyahara/misc](https://github.com/mmiyahara/misc/blob/master/quizlet-oxford-3000/stripHTML.js)

```sh
# Remove HTML tags from the crawled data
$ node stripHTML.js
```
```javascript
const fs = require('fs');
const words = require('./words.js');

const wordsFlatten = [];
words.forEach(ary => {
  ary.forEach(obj => {
    obj.def = obj.def.replace(/<(?:.|\n)*?>/gm, '').split('.')[0];
    wordsFlatten.push(obj);
  });
});

if (!fs.exists('wordsFlatten.js')) {
  fs.writeFileSync('wordsFlatten.js', JSON.stringify(wordsFlatten, null, '  '));
} else {
  console.log('File already exists.');
}
```

[ã“ã‚“ãªæ„Ÿã˜](https://github.com/mmiyahara/misc/blob/751d176db5cf1ee268ebf3db8ec3323f743f16f5/quizlet-oxford-3000/words.js#L241)ã«ãã‚‚ãã‚‚ãƒ‡ãƒ¼ã‚¿å–å¾—ã«å¤±æ•—ã—ã¦ã„ã‚‹ã‚‚ã®ã‚‚ã‚ã‚Šã¾ã—ãŸãŒã€
21å˜èªã¨æ¯”è¼ƒçš„å°‘ãªã‹ã£ãŸãŸã‚ã€æ‰‹ä½œæ¥­ã§ç›´ã—ã¾ã—ãŸã€‚

### 3. Quizlet ã« APIçµŒç”±ã§å˜èªã‚»ãƒƒãƒˆã‚’ä½œæˆã—ãƒ‡ãƒ¼ã‚¿ã‚’ç™»éŒ²
[Quizlet ã® API ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://quizlet.com/api/2.0/docs) ã‚’ç¢ºèªã™ã‚‹ã¨ã€`OAuth 2.0` ã§èªè¨¼ã‚’é€šã™å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
`OAuth 2.0` ã«æ˜ã‚‹ããªã‹ã£ãŸãŸã‚ã€[OAuth 2.0: An Overview - YouTube](https://www.youtube.com/watch?v=CPbvxxslDTU) ç­‰ã‚’è¦³ãªãŒã‚‰å®Ÿè£…ã—ã¾ã—ãŸã€‚
(`OAuth 2.0` å½¢å¼ã®èªè¨¼ã‚’ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³çµŒç”±ã§é€šã™ã®ãŒé¢å€’ã§ã—ãŸã€‚`puppeteer`ã§é€šã—ã¾ã—ãŸãŒå°‘ã—ç„¡ç†ã‚„ã‚Šæ„ŸãŒã‚ã‚Šã¾ã™ã€‚ã„ã„æ–¹æ³•ãŒã‚ã‚Œã°æ•™ãˆã¦ãã ã•ã„ğŸ™)

- äº‹å‰ã« [API Dashboard | Quizlet](https://quizlet.com/api-dashboard) ã§ã€
`Your Redirect URI` ã‚’ http://127.0.0.1:1337 ã«è¨­å®šã—ã¦ã„ã¾ã™ã€‚
  OAuth èªè¨¼æˆåŠŸå¾Œãƒ­ãƒ¼ã‚«ãƒ«ã‚µãƒ¼ãƒã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã—ã€ãƒ–ãƒ©ã‚¦ã‚¶ã®ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ¼ã‹ã‚‰`code`ã‚’å–å¾—ã™ã‚‹ãŸã‚ã§ã™ã€‚

```sh
# Add new set on Quizlet
$ QUIZLET_CLIENT_ID=CLIENT_ID \
  QUIZLET_SECRET=SECRET_KEY \
  QUIZLET_GMAIL_ADDRESS=GMAIL_ADDRESS_FOR_OAUTH \
  QUIZLET_GMAIL_PASSWORD=GMAIL_PASSWORD_FOR_OAUTH \
  node addQuizletSet.js

    Quizlet Code is being generated...
    Quizlet Code is generated successfully.
    Quizlet Token is being generated...
    Quizlet Token is generated successfully.
    Set 355331197 has been created.
    Set 355331197 has been updated.
```

```javascript
const words = require('./wordsFlatten');
const http = require('http');
const puppeteer = require('puppeteer');
const rp = require('request-promise');

http.createServer((_, res) => {
  res.writeHead(200, {'Content-Type': 'text/plain'});
  res.end('You should be redirected here.\n');
}).listen(1337, '127.0.0.1');

// ...

(async () => {
  const code = await getCode(clientId);
  const token = await getToken(code);
  const setId = await postSet(token);
  const putBody = generatePutBody('Oxford 3000 - 1', words);
  await putSet(token, putBody, setId);
  process.exit();
})();
```
å„é–¢æ•°ã§ã¯ã€ã–ã£ãã‚Šã¨ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¦ã„ã¾ã™ã€‚

|é–¢æ•°|å½¹å‰²|
|---|---|
|getCode|`puppeteer` ã§ OAuth èªè¨¼ç”¨ã® `code` ã‚’å–å¾—(èªå¯ã‚µãƒ¼ãƒã¯Googleã‚’ä½¿ç”¨)|
|getToken|`code` ã‚’å…ƒã« `access_token` ã‚’å–å¾—|
|postSet|`Quizlet` ä¸Šã«æ–°è¦ã‚»ãƒƒãƒˆã‚’ä½œæˆ|
|generatePutBody|æ–°è¦ã‚»ãƒƒãƒˆã‚’æ›´æ–°ã™ã‚‹ãŸã‚ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£ã‚’ä½œæˆ|
|putSet|`Quizlet` ä¸Šã«ä½œæˆã—ãŸæ–°è¦ã‚»ãƒƒãƒˆã‚’æ›´æ–°|

## ã¾ã¨ã‚ / æ‰€æ„Ÿ
- ä½œæˆã—ãŸå˜èªã‚»ãƒƒãƒˆã¯ä»¥ä¸‹ã«å…¬é–‹ã—ã¦ã„ã¾ã™ã€‚
  - [Oxford 3000 - 1 Flashcards | Quizlet](https://quizlet.com/355331197/oxford-3000-1-flash-cards/)
  - [Oxford 3000 - 2 Flashcards | Quizlet](https://quizlet.com/355331155/oxford-3000-2-flash-cards/)
- `Quizlet` ä¸Šã®å˜èªã‚»ãƒƒãƒˆã«å˜èªãƒ‡ãƒ¼ã‚¿å…ƒã®URLã¸ã®Webãƒªãƒ³ã‚¯ã‚’ç½®ããŸã‹ã£ãŸã®ã§ã™ãŒã€å˜èªã‚»ãƒƒãƒˆä¸Šã§HTMLã‚’ä½¿ãˆã•ãªã•ãã†(ãƒ—ãƒ¬ãƒ¼ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã®ã¿)ã ã£ãŸãŸã‚æ–­å¿µã—ã¾ã—ãŸã€‚
- `Quizlet` ã®å˜èªã‚»ãƒƒãƒˆã«ã¯ã€1å˜èªã‚»ãƒƒãƒˆã«ã¤ãä¸Šé™2000å˜èªã®åˆ¶é™ãŒã‚ã£ãŸãŸã‚ã€å–å¾—ã—ãŸå˜èªã‚’äºŒåˆ†ã—ã€2å˜èªã‚»ãƒƒãƒˆã‚’ä½œæˆã—ã¦ã„ã¾ã™ã€‚
- `Quizlet` ã«ã¯ä»•æ§˜ä¸ŠCSVå½¢å¼ã®ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚ã‚‹ã¿ãŸã„ã‚ˆã†ã§ã™ãŒã€2000å˜èªã®CSVã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã‚ˆã†ã¨ã—ãŸã¨ã“ã‚ã€ãƒ–ãƒ©ã‚¦ã‚¶ç”»é¢ã®æç”»ãŒè¿½ã„ä»˜ã‹ãšäº‹å®Ÿä¸Šã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å‡ºæ¥ã¾ã›ã‚“ã§ã—ãŸã€‚
- [API Dashboard | Quizlet](https://quizlet.com/api/2.0/docs) ä¸Šã«ä»¥ä¸‹ã®è¨˜è¼‰ãŒã‚ã£ãŸã®ã§ã€2019å¹´1æœˆç¾åœ¨ã§ã¯ APIã‚­ãƒ¼ã®ç™ºè¡ŒãŒå‡ºæ¥ãªã„å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

  > Note: As of December 2018, Quizlet has paused issuing new API keys.

## å‚è€ƒ
- [puppeteer/api.md at master Â· GoogleChrome/puppeteer](https://github.com/GoogleChrome/puppeteer/blob/master/docs/api.md)
- [Node.jsã§5è¡ŒWebã‚µãƒ¼ãƒã‚’æ›¸ã„ã¦ã¿ã‚ˆã†ã€ˆNode.jsã‚·ãƒªãƒ¼ã‚º vol.1ã€‰ - Tech Blog - Recruit Lifestyle Engineer](https://engineer.recruit-lifestyle.co.jp/techblog/2015-06-22-node1/)
